# 📘 기숙사 공용 자원 관리 시스템
## 🔹 공통 설계 원칙
- 모바일 우선 PWA
- 상태 기반 UI
- 간결한 정보 입력 + 단계적 전환 인터페이스
- 사용자 권한 기반 UI 차등 제공 (일반 사용자 / 층별장 / 관리자)
- Service Worker 기반 푸시 알림 기능 내장

## 👤 일반 사용자 기능

### 1. 회원가입 / 로그인
- 로그인 필요 시 회원가입/로그인 모달 팝업
- 회원가입
	- 호실번호 + 개인번호입력시 자동 아이디 생성 
	- 그후 이름, 비밀번호, 비밀번호 수정, 초기화를 위한 이메일 등록
- 로그인 성공시 팝업 자동닫고 해당페이지에 접근할수있게함
	- 자신의 아이디,비밀번호 자동완성되게 형식 지원하기 


### 2. 냉장고 보관
- 본인 물품만 목록 확인 
	- 목록은 이름, 유통기한만 표시되고
	- 목록을 클릭하면 물품 상세페이지로 이동 
		- 제품명, 유통기한, 메모 , 수정일, 마지막 검사일, 제품명, 유통기한, 메모만 수정가능, 물품삭제 가능
- NFC 태그 스캔 → 등록 안 된 경우 등록 페이지 / 등록된 경우 상세 페이지
	- 검사관이 아닌이가 등록된 태그를 스캔할경우 상세페이지로 이동하나 수정, 삭제 불가능하다.
	-  만약에 로그인이 되지 않은 상태였다면 로그인 모달창이 뜨고, 로그인 완료후 기존 과정을 진행한다
- 수정/삭제는 상세페이지에서만 가능
	- 이때 마지막 검사일 이후 이름, 유통기한 수정 시 검사 이후 추가된 항목으로 분류되어 검사관에게 검사대상임을 표시한다. 
- 메모는 본인만 확인 가능

### 3. 세탁기 사용 인증
- 상태 흐름: AVAILABLE → IN_USE → DONE → AVAILABLE
- UNAUTHORIZED_USE
	- 기기 등록을 하지 않고 사용하는 경우
	- 남은 시간 기록해 무단사용 신고 → 미등록 기기 전환- 상태는 지정 시간 후 자동 AVAILABLE로 전환
- 비활성화 신고,접수(관리자수동고장처리)은 UI에선 하나의 공통된 UI로 보임  
	-  ERROR_REPORTED비활성화 신고
	 - OUT_OF_SERVICE:비활성화 접수/ 관리자가 수동고장처리
- 사용시간 설정
	- 기본시간에서 십분단위, 일분단위 업다운  
		- 세탁기 38분 고정->10분, 1분단위로 +/- 수정  
		- 건조기 50분 고정 -> 10분단위로 +/- 수정 
	- 기본시간 유저별로 설정가능 
	- 시간에 이름붙여 추가 커스텀가능
- 알림 설정 (종료 7분 전 알림)
- 누군가 시간 등록안하고 사용 시 누구나 남은 시간 입력해 무단사용상태로 전환시킬수있다
	- 이때 종료전 알림받기는 선택이나, 비활성화가 기본설정
- 기기 선택시 남은 시간 수정 가능
	- 타인이 남은시간 수정시 당사자에게 시간수정했다는 알림이감
- 기기가 done상태일때로 전환되고 5분이 지나도 available로 상태가 변화되지 않으면(기기 사용자가 세탁물 회수후 세탁회수완료를 누르지 않으면) 타인이 사용자에게 알림보내기 활성화
	- 기다리고있어요(1회만 전송가능)
	- 세탁물 빼놨어요(강제 done사용전환)
- 세탁기 비활성화 신고 누구나 할수있음
	- 고장 사유적기
- 비활성화 신고된 세탁기는 ERROR_REPORTED 상태이며 기기 선택시
	- 신고자
	- 고장사유가 표시되며 사용이 차단됨
	- 만일 관리자가 신고 접수를 한다면 OUT_OF_SERVICE로 상태 전환이 되며 UI는 변함이 없다
- 관리자가 신고를 받지않고 고장처리할경우  OUT_OF_SERVICE으로 바로 상태가 전환이 된다.
### 4. 도서 대출
- 전체 도서 목록 나열 (예약/대출/번호순 나열) 
	- 클릭시 해당 도서 상세페이지 모달팝업이 뜸
- 책조회-> 검색결과 목록 클릭시 해당 도서 상세페이지 모달팝업이 뜸
- 책 상세페이지 모달팝업
	- 책이름, 책번호, 출판년도, 저자
	- 책의 현재 상태(예약, 대출, 이용가능, 분실)표시
		- 대출, 예약상태인경우 
		- 현재 대출인, 예약인 명시하기
	- 대출/반납/예약/연장(본인이 대출중인경우) 신청
- 연체 시 자동 벌점 
	- 벌점받으면 알림
- 반납일 3일 전 알림

### 5. 스터디룸 예약
- 이번 주 예약 현황 대시보드 제공
	- 매주 월요일 일주일 예약 오픈
	- 빈 시간 클릭 → 10분 단위 예약 모달팝업
		- 본인정보, 사용시간, 시작시간, 종료시간, 이용사유
	- 예약된 시간 클릭-> 예약 상세 모달팝업 
		- 예약 당사자일시에만 취소 가능

## 🧑‍🏫 검사자(층별장) 기능
- 유저의 모든기능+ 냉장고검사의 추가적인 기능을 부여받은 유저
### 냉장고 검사
- 태그 스캔 시 해당 제품 검사일 자동 갱신
- 점검날 검사할것
	- 검사 기준: 포장 상태, 유통기한/이름 정확성
- 제품 상세페이지에서 유저에게 벌점 부여 UI 
	- 사유 선택: 포장미흡/유통기한 초과/기타(상세입력)
	- 사유는 여러개 선택가능
	- 벌점 부여시 당사자에게 알림이 간다.
- 검사 배너 클릭시
	- 검사일별로 목록이 뜨고,
		- 이전 검사일에 벌점을 준 기록 볼수있다
		- 한번 준 벌점은 수정하지 못한다
	- 다음 검사 예정일 등록/수정/삭제


## 🛠️ 관리자 기능

### 1. 관리자 페이지 회원가입, 로그인
- 개발자가 최고관리자 아이디, 비밀번호를 제공
- 최고 관리자가 일반관리자들이 관리자 페이지에서 관리자 회원가입을 하면 관리자 권한 부여
- 관리자 페이지에서 로그인이 아닌 상태일때 회원가입,로그인 모달팝업
	- 아이디: 문자,숫자 섞어서 다른 관리자,유저아이디랑 중복 안되게
	- 비밀번호
	- 이메일(비밀번호 변경, 초기화 인증)등록


### 2. 유저 관리
- 사용자 검색 (호실, 개인번호)
- 동/층/호실 추가 및 삭제 (`is_active = false`)
- 공간 삭제시 퇴사 처리여부확인 안내 팝업

### 3. 냉장고 관리
- 점검일별 폐기물 목록 확인
- 층별장 임명 및 수정
- 냉장고 추가/삭제, 
- 해당 냉장고의 전체물품 초기화(이건 구현 고민중)

### 4. 세탁기 관리
- 필터: 성별, 기기유형, 현재 상태
- 기기선택후 상세정보확인 (번호,상태,현재 이용인 등)
	- 상태전환
		- (누군가가 사용할때 상태 전환시 그 사람에게만 관리자가 상태를 변환했다고 알림이 간다) 
	- 해당기기 사용횟수/시간
- 비활성화 상태로 수동 전환 및 해제
- 비활성화 요청 접수
- 세탁기삭제, 세탁기 추가

### 5. 스터디룸 관리
- 예약횟수순 정렬, 기본순 정렬 보기
- 스터디룸별 스터디룸이름/ 월예약횟수/월 사용시간/삭제/상태 변경(비활성화(수리중)/사용가능) 
- 스터디룸 추가, 삭제
- 해당주만 예약이가능한 유저와 달리 운영자는 원하는 날 예약가능

### 6. 도서 관리
- 전체 도서 목록 (예약/대출/번호순 나열) 
	- 클릭시 해당 도서 상세페이지 모달팝업이 뜸
- 책조회-> 검색결과 목록 클릭시 해당 도서 상세페이지 모달팝업이 뜸
- 책 상세페이지 모달팝업
	- 유저와 같은 기능에다가 + 책정보 수정기능, 분실 처리, 삭제기능 추가
- 도서 추가기능

### 7. 상벌점 관리
- 월별 탭별 기록 확인 및 삭제
- 사유/대상자/유형 확인 후 판단하여 반영

### 8. 프로그램 관리
- 프로그램 추가/수정/삭제

### 9. 로그 관리
- 사용자 및 관리자 로그 조회 (최고관리자는 전체 열람)
- 기간별 조회 및 엑셀 내보내기

### 10. 관리자 설정
- 비밀번호 초기화/변경 (이메일 인증 기반)

# 11. 휴관 설정
- 휴관설정할때  
	- 시작날짜  
	- 종료날짜  
	- 휴관 종료일 (숫자 선택(1~5))일전 모든사용자 초기화(신규 입사를 위한 자동 준비)  
	- 회원가입은 가능 이때 회원정보가 있으면 이미 존재하는 사용자입니다 뜨게 하기  
	  
- 휴관시작전  
	- 시작일/종료일 자유롭게 수정가능  
- 휴관중  
	- 관리자를 제외한 유저는 로그인 버튼 클릭시 휴관기간 명시해주는 경고창뜨고 로그인 불가  
	- 종료일만 수정가능  
	- 오늘 개관하고 싶을때 종료일을 어제로 수정해주세요(안내문구 넣어주기)  
	  
- 휴관기간 모드 on  
	- 모든 유저 로그인 비활성화  
	- 관리자는 활성화  
	- 냉장고 현재 물품 모두 삭제  
	  
- 휴관모드 off  
	- 유저 로그인 활성화

## 🔗 메인페이지의 기타 기능
- 급식 정보 확인
- 외박 신청 페이지 바로가기

- 고민중인것: 개인정보면에서 이정도 보안이면 되려나
- 고민중인것
	- 최적의 세탁시간, 온도, 코스를 찾아냈을때 세탁기나 건조기 이용시에 그 유형의 최적조합을 리마인드하게 하고 싶다
	- 운영자와 db에서 기록을 어디까지 해야할까?
		- 쓸모있어보이는 최소한의 통계를 제공하고 싶은데
